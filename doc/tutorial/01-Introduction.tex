

\subsection{M3Gとは}
M3Gはモバイル機器向けに定義された3DグラフィックスAPIの規格です。
Javaで記述されJava Platform, Micro Edition (Java ME)プラットフォーム上で動作します。
Java Community ProcessによってJSR-184として策定された。現在のバージョンは1.1です。

M3Gは典型的にはOpenGL ESと共に使われオブジェクト指向のハイレベルインターフェースを提供します。
M3Gはキャラクターアニメーションのためのスキンメッシュや、モーフメッシュを提供します。
またM3G規格のファイルフォーマットも定義します。

\subsection{M3Gの特徴}
\subsubsection{M3Gの機能}
M3Gの提供する機能は図の通りです。
\begin{itemize}
\item カメラ、ライト、マテリアルなど基本描画機能
\item アニメーションのためのキーフレームシーケンスおよびコントローラー
\item スキンメッシュとモーフメッシュｎ
\item M3Gファイルフォーマット
\item 例外ベースのエラー処理
\end{itemize}
M3Gは下位層としてOpenGL ESを想定していますがDirect Xなどの他のAPIも利用可能です。
ただし現時点ではOpenGL ES以外を利用する実装はありません。
\subsubsection{M3Gに含まれないもの}
\begin{itemize}
\item シェーダープログラミング(*1)
\item ポリゴン以外の高次曲面
\item パーティクル
\item ストリップ以外の指定方法
\item 衝突判定および物理演算
\end{itemize}
(*1) 次のM3Gバージョン2.0で利用可能になります。

一言で言えばM3G APIを使う事でPlayStation2(R)レベルの3Dグラフィックスが記述できるようになります。

\subsection{Desktop-M3Gとは}
Desktop-M3GはM3G APIをデスクトップ用にC++で実装したライブラリです。
LinuxおよびFreeBSDで利用可能です。ちなみに筆者の環境はUbuntuです。
MITライセンスで配布され自由に利用、変更可能です。
JavaとC++の言語の違いから来る修正を除けば、可能な限りオリジナルのM3G APIに忠実に実装しています。
M3G形式のファイルフォーマットは100\%互換性があり、そのまま利用できます。


\begin{tabular}{lll}
  機能            & M3G            & Desktop-M3G \\
  プラットフォーム & J2ME(モバイル) & Linux(デスクトップ) \\
  実装言語         & Java          & C++ \\
  下位層           & OpenGL ES     & OpenGL 
\end{tabular}

\subsection{利用条件}
Desktop-M3Gを利用するには下記のライブラリが必要です。
\begin{itemize}
\item OpenGL 2.1以上
\item GLEW
\end{itemize}
このほかにウィンドウやOpenGLコンテキストを扱うのに、glutやQtが必要です。

\subsection{M3Gの構成}
M3Gは30のクラスからなるオブジェクト指向のAPIです。
そのうち半分の15はOpenGLをオブジェクト指向にラップしたものです。
3つがアニメーションのためのクラスで、9つがシーンおよび構成物（メッシュなど）です。
残り3つはその他ローダーなどです。
M3GはOpenGLの上位層として完全にOpenGLを隠蔽します。従ってM3G APIを使用しているときはOpenGLを直接使用する事はできません。









